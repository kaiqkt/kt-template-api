#name: PR Branch Rules
#
#on:
#  pull_request:
#    types: [opened, edited, synchronize, reopened]
#
#jobs:
#  validate-pr:
#    runs-on: ubuntu-latest
#
#    steps:
#      - name: Validate PR source/target and branch prefix
#        run: |
#          echo "Base (target): ${{ github.base_ref }}"
#          echo "Head (source): ${{ github.head_ref }}"
#
#          BASE="${{ github.base_ref }}"
#          HEAD="${{ github.head_ref }}"
#
#          # Extract prefix before "/"
#          PREFIX=$(echo "$HEAD" | cut -d'/' -f1)
#
#          echo "Detected branch prefix: $PREFIX"
#
#          fail() {
#            echo "PR validation failed: $1"
#            exit 1
#          }
#
#          pass() {
#            echo "PR validation passed."
#            exit 0
#          }
#
#          # develop -> develop
#          if [[ "$BASE" == "develop" && "$HEAD" != "develop" ]]; then
#            case "$PREFIX" in
#              feature|hotfix|chore|docs|refactor)
#                pass
#                ;;
#              *)
#                fail "PRs into develop must come from branches starting with: feature/, hotfix/, chore/, docs/, or refactor/."
#                ;;
#            esac
#          fi
#
#          # develop -> master
#          if [[ "$HEAD" == "develop" && "$BASE" == "master" ]]; then
#            pass
#          fi
#
#          # Only allow release branches to merge into master from develop
#          if [[ "$BASE" == "master" && "$HEAD" != "develop" ]]; then
#            if [[ "$PREFIX" == "release" ]]; then
#              pass
#            fi
#          fi
#
#          # master -> master (hotfixes directly on master)
#          if [[ "$BASE" == "master" && "$HEAD" != "develop" ]]; then
#            if [[ "$PREFIX" == "hotfix"|"release" ]]; then
#              pass
#            fi
#          fi
#
#          fail "Branch combination or prefix not allowed: $HEAD -> $BASE"
